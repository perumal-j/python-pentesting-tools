import socket
import os
import platform

serv_address=""
serv_port=6000

soc=socket.socket(socket.AF_INET,socket.SOCK_STREAM)
soc.setsockopt(socket.SOL_SOCKET,socket.SO_REUSEADDR)
soc.bind((serv_address,serv_port))
soc.listen()
conn, address=soc.accept()

while True:
    try:
        data=conn.recv(1024)
    except:continue

    if(data.decode('utf-8')=='1'):
        tosend=platform.uname()+" "+platform.machine()+" "+platform.platform()
        conn.sendall(tosend.encode())
    elif(data.encode('utf-8')=='2'):
        data=conn.recv(1024)
        try:
            filelist=os.listdir(data.decode('utf-8'))
            tosend=""
            for x in filelist:
                tosend += ","+x
        except:
            tosend="Wrong Path!!!"
        conn.sendall(tosend.encode())
    elif(data.decode('utf-8')=='0'):
        conn.close()
        conn, address =soc.accept()